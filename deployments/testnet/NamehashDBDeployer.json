{
  "address": "0x0045D39D9DFEC3Be514E04dD692dBfCc2cb56D75",
  "abi": [
    {
      "inputs": [],
      "stateMutability": "nonpayable",
      "type": "constructor"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "node",
          "type": "bytes32"
        },
        {
          "internalType": "bytes32",
          "name": "label",
          "type": "bytes32"
        }
      ],
      "name": "namehash",
      "outputs": [
        {
          "internalType": "bytes32",
          "name": "",
          "type": "bytes32"
        }
      ],
      "stateMutability": "pure",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "namehashDB",
      "outputs": [
        {
          "internalType": "contract NamehashDB",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    }
  ],
  "transactionHash": "0x2c86ac93875ecceb18176e50f5dfd09aac63f348e67283345039ac57b7f59230",
  "receipt": {
    "to": null,
    "from": "0x69f7324c36F383451fB85f202d0dFbEe00aF0072",
    "contractAddress": "0x0045D39D9DFEC3Be514E04dD692dBfCc2cb56D75",
    "transactionIndex": 0,
    "gasUsed": "612891",
    "logsBloom": "0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
    "blockHash": "0xa202c905e52bffdc6971a8884e0957f0d92f2d7f978111069959dda7075e01fb",
    "transactionHash": "0x2c86ac93875ecceb18176e50f5dfd09aac63f348e67283345039ac57b7f59230",
    "logs": [],
    "blockNumber": 10874462,
    "cumulativeGasUsed": "612891",
    "status": 1,
    "byzantium": true
  },
  "args": [],
  "numDeployments": 1,
  "solcInputHash": "320d301f50f1429d649e22e3e22ef34a",
  "metadata": "{\"compiler\":{\"version\":\"0.8.13+commit.abaa5c0e\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"inputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"node\",\"type\":\"bytes32\"},{\"internalType\":\"bytes32\",\"name\":\"label\",\"type\":\"bytes32\"}],\"name\":\"namehash\",\"outputs\":[{\"internalType\":\"bytes32\",\"name\":\"\",\"type\":\"bytes32\"}],\"stateMutability\":\"pure\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"namehashDB\",\"outputs\":[{\"internalType\":\"contract NamehashDB\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"}],\"devdoc\":{\"author\":\"Gilgames <gilgames@kuname.domains>\",\"kind\":\"dev\",\"methods\":{},\"title\":\"KNS NamehashDB Setup\",\"version\":1},\"userdoc\":{\"kind\":\"user\",\"methods\":{},\"version\":1}},\"settings\":{\"compilationTarget\":{\"src/NamehashDBDeployer.sol\":\"NamehashDBDeployer\"},\"evmVersion\":\"london\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"ipfs\",\"useLiteralContent\":true},\"optimizer\":{\"enabled\":true,\"runs\":666},\"remappings\":[]},\"sources\":{\"src/NamehashDBDeployer.sol\":{\"content\":\"// SPDX-License-Identifier: AGPL-3.0-only\\npragma solidity >=0.8.13;\\n\\nimport { OnChainNamehashDB } from \\\"./OnChainNamehashDB.sol\\\";\\nimport { NamehashDB } from \\\"./interfaces/NamehashDB.sol\\\";\\n\\n/// @title KNS NamehashDB Setup\\n/// @author Gilgames <gilgames@kuname.domains>\\ncontract NamehashDBDeployer {\\n    NamehashDB public immutable namehashDB;\\n\\n    function namehash(bytes32 node, bytes32 label) public pure returns (bytes32) {\\n        return keccak256(abi.encodePacked(node, label));\\n    }\\n\\n    constructor() {\\n        namehashDB = new OnChainNamehashDB();\\n        namehashDB.store(bytes32(0), \\\"kcc\\\");\\n        namehashDB.store(bytes32(0), \\\"resolver\\\");\\n        namehashDB.store(bytes32(0), \\\"reverse\\\");\\n        namehashDB.store(namehash(bytes32(0), \\\"reverse\\\"), \\\"addr\\\");\\n    }\\n}\\n\",\"keccak256\":\"0xdc07366ed8cf3fac28d4efd2a1bf1b3f6302fe3ab56e021a02a6c6951421835e\",\"license\":\"AGPL-3.0-only\"},\"src/OnChainNamehashDB.sol\":{\"content\":\"// SPDX-License-Identifier: AGPL-3.0-only\\npragma solidity >=0.8.13;\\n\\nimport { NamehashDB } from \\\"./interfaces/NamehashDB.sol\\\";\\n\\n/// @title On-Chain Namehash Database\\n/// @author Gilgames <gilgames@kuname.domains>\\n/// @notice A simple on-chain DB to store and lookup hashed KNS names.\\ncontract OnChainNamehashDB is NamehashDB {\\n    mapping(bytes32 => string) private names;\\n    mapping(bytes32 => bool) private exists;\\n\\n    function namehash(bytes32 node, bytes32 label) public pure returns (bytes32) {\\n        return keccak256(abi.encodePacked(node, label));\\n    }\\n\\n    function _store(bytes32 node, string memory name) private {\\n        names[node] = name;\\n        exists[node] = true;\\n    }\\n\\n    function store(bytes32 node, string calldata label) external {\\n        bytes32 subnode = namehash(node, keccak256(abi.encodePacked(label)));\\n\\n        // if node is 0 then label is a tld, store it\\n        if (node == bytes32(0)) {\\n            _store(subnode, label);\\n            return;\\n        }\\n\\n        // if parent node doesn't exist in the db, do nothing\\n        if (exists[node] == false) {\\n            return;\\n        }\\n\\n        // if subnode already exists in db, do nothing\\n        if (bytes(names[subnode]).length != 0) {\\n            return;\\n        }\\n\\n        _store(subnode, string(abi.encodePacked(label, \\\".\\\", names[node])));\\n    }\\n\\n    function lookup(bytes32 nodehash) external view returns (string memory) {\\n        return names[nodehash];\\n    }\\n}\\n\",\"keccak256\":\"0x87cde379f70884022b659ce8e64063bcdadad6fbf91b2e30b1e1b3654e296e39\",\"license\":\"AGPL-3.0-only\"},\"src/interfaces/NamehashDB.sol\":{\"content\":\"// SPDX-License-Identifier: AGPL-3.0-only\\npragma solidity >=0.8.13;\\n\\ninterface NamehashDB {\\n    /**\\n     * @dev Stores the hash and the full original name of a subnode from\\n     *      the hash of its node and the subnode label.\\n     * @param node The hash of the node parent of the subnode.\\n     * @param label The name of the subnode to be stored.\\n     */\\n    function store(bytes32 node, string calldata label) external;\\n\\n    /**\\n     * @dev Looks up the full original name of a node.\\n     * @param nodehash The hash of the node to lookup.\\n     * @return An empty string if the node is not in the DB, the name otherwise.\\n     */\\n    function lookup(bytes32 nodehash) external view returns (string memory);\\n}\\n\",\"keccak256\":\"0x06442eb99c8665cd0b833c5beffdfb01a099d03c38eaae59f88176989a0a2a62\",\"license\":\"AGPL-3.0-only\"}},\"version\":1}",
  "bytecode": "0x60a060405234801561001057600080fd5b5060405161001d90610260565b604051809103906000f080158015610039573d6000803e3d6000fd5b506001600160a01b0316608081905260408051639d105a2560e01b815260006004820152602481019190915260036044820152626b636360e81b6064820152639d105a2590608401600060405180830381600087803b15801561009b57600080fd5b505af11580156100af573d6000803e3d6000fd5b505060805160408051639d105a2560e01b815260006004820152602481019190915260086044820152673932b9b7b63b32b960c11b60648201526001600160a01b039091169250639d105a259150608401600060405180830381600087803b15801561011a57600080fd5b505af115801561012e573d6000803e3d6000fd5b505060805160408051639d105a2560e01b815260006004820152602481019190915260076044820152667265766572736560c81b60648201526001600160a01b039091169250639d105a259150608401600060405180830381600087803b15801561019857600080fd5b505af11580156101ac573d6000803e3d6000fd5b5050608051604080516000602080830191909152667265766572736560c81b828401528251808303840181526060830180855281519190920120639d105a2560e01b90915260648201526084810191909152600460a48201526330b2323960e11b60c48201526001600160a01b039091169250639d105a25915060e401600060405180830381600087803b15801561024357600080fd5b505af1158015610257573d6000803e3d6000fd5b5050505061026d565b6105c9806103a983390190565b6080516101226102876000396000608501526101226000f3fe6080604052348015600f57600080fd5b506004361060325760003560e01c80631d9273c71460375780632eb8221a146081575b600080fd5b606e604236600460cb565b604080516020808201949094528082019290925280518083038201815260609092019052805191012090565b6040519081526020015b60405180910390f35b60a77f000000000000000000000000000000000000000000000000000000000000000081565b60405173ffffffffffffffffffffffffffffffffffffffff90911681526020016078565b6000806040838503121560dd57600080fd5b5050803592602090910135915056fea2646970667358221220be3450510aab9fae304ca68b043700b498dde4112e8791cb4ea124fb7547835764736f6c634300080d0033608060405234801561001057600080fd5b506105a9806100206000396000f3fe608060405234801561001057600080fd5b50600436106100415760003560e01c80631d9273c7146100465780639d105a2514610093578063f39ec1f7146100a8575b600080fd5b610080610054366004610368565b604080516020808201949094528082019290925280518083038201815260609092019052805191012090565b6040519081526020015b60405180910390f35b6100a66100a136600461038a565b6100c8565b005b6100bb6100b6366004610406565b6101f0565b60405161008a919061041f565b600061011f8484846040516020016100e1929190610474565b60408051601f198184030181528282528051602091820120838201949094528282019390935280518083038201815260609092019052805191012090565b90508361016c576101668184848080601f01602080910402602001604051908101604052809392919081815260200183838082843760009201919091525061029292505050565b50505050565b60008481526001602052604081205460ff161515900361018c5750505050565b600081815260208190526040902080546101a590610484565b1590506101b25750505050565b6101668184846000808981526020019081526020016000206040516020016101dc939291906104be565b604051602081830303815290604052610292565b600081815260208190526040902080546060919061020d90610484565b80601f016020809104026020016040519081016040528092919081815260200182805461023990610484565b80156102865780601f1061025b57610100808354040283529160200191610286565b820191906000526020600020905b81548152906001019060200180831161026957829003601f168201915b50505050509050919050565b60008281526020818152604090912082516102af928401906102cf565b50506000908152600160208190526040909120805460ff19169091179055565b8280546102db90610484565b90600052602060002090601f0160209004810192826102fd5760008555610343565b82601f1061031657805160ff1916838001178555610343565b82800160010185558215610343579182015b82811115610343578251825591602001919060010190610328565b5061034f929150610353565b5090565b5b8082111561034f5760008155600101610354565b6000806040838503121561037b57600080fd5b50508035926020909101359150565b60008060006040848603121561039f57600080fd5b83359250602084013567ffffffffffffffff808211156103be57600080fd5b818601915086601f8301126103d257600080fd5b8135818111156103e157600080fd5b8760208285010111156103f357600080fd5b6020830194508093505050509250925092565b60006020828403121561041857600080fd5b5035919050565b600060208083528351808285015260005b8181101561044c57858101830151858201604001528201610430565b8181111561045e576000604083870101525b50601f01601f1916929092016040019392505050565b8183823760009101908152919050565b600181811c9082168061049857607f821691505b6020821081036104b857634e487b7160e01b600052602260045260246000fd5b50919050565b828482376000838201601760f91b81526001600085548181841c9050838216806104e957607f821691505b6020808310820361050857634e487b7160e01b85526022600452602485fd5b81801561051c576001811461053157610562565b60ff1985168888015283880187019550610562565b60008b81526020902060005b858110156105585781548a82018a015290880190830161053d565b5050868489010195505b50939b9a505050505050505050505056fea2646970667358221220356d7d199e1e5527c4c33a979c7bbba8a2d745a0f9308c5e29a97f548a7c139f64736f6c634300080d0033",
  "deployedBytecode": "0x6080604052348015600f57600080fd5b506004361060325760003560e01c80631d9273c71460375780632eb8221a146081575b600080fd5b606e604236600460cb565b604080516020808201949094528082019290925280518083038201815260609092019052805191012090565b6040519081526020015b60405180910390f35b60a77f000000000000000000000000000000000000000000000000000000000000000081565b60405173ffffffffffffffffffffffffffffffffffffffff90911681526020016078565b6000806040838503121560dd57600080fd5b5050803592602090910135915056fea2646970667358221220be3450510aab9fae304ca68b043700b498dde4112e8791cb4ea124fb7547835764736f6c634300080d0033",
  "devdoc": {
    "author": "Gilgames <gilgames@kuname.domains>",
    "kind": "dev",
    "methods": {},
    "title": "KNS NamehashDB Setup",
    "version": 1
  },
  "userdoc": {
    "kind": "user",
    "methods": {},
    "version": 1
  },
  "storageLayout": {
    "storage": [],
    "types": null
  }
}